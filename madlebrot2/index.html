<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="index.css" /> 

  </head>

  <body>

    <div id="container">
      <canvas id="mandlbrotCanvas" width="3840" height="2160"></canvas>
      <canvas id="rectCanvas" width="3840" height="2160"></canvas>
    </div>

    <script src="mandlebrot.js?2"></script>
    
    <script>
      let rectCanvas = document.querySelector("#rectCanvas");

      let rectCtx = rectCanvas.getContext("2d");

      // event listners for mouse stuff
      rectCanvas.addEventListener("mousedown", e => mouseDown(e));
      rectCanvas.addEventListener("mousemove", e => mouseMove(e));
      rectCanvas.addEventListener("mouseup", e => mouseUp(e));


      // global vars needed for box stuff 
      var startX;
      var startY;
      var isDown;


      // set context stuff for rect 
      rectCtx.strokeStyle = "red";
      rectCtx.lineWidth = 15;


      function myDrawRect(startX, startY, endX, endY) {

        let rectWidth = endX - startX - rectCtx.lineWidth;
        let rectHeight = endY - startY - rectCtx.lineWidth;

        console.log(startX, startY);
        console.log(endX, endY);

        

        // here need to call mandlebrot function with the right numbers
        mandCtx.fillStyle = "red";
        mandCtx.fillRect(startX, startY, rectWidth, rectHeight);

        
        

      }

      function mouseUp(e) {
        e.preventDefault();
        
        let endX = parseInt(e.offsetX);
        let endY = parseInt(e.offsetY);

        isDown = false;
        rectCtx.clearRect(0,0, rectCanvas.width, rectCanvas.height);

        myDrawRect(startX, startY, endX, endY);



      }



      function mouseDown(e) {
        e.preventDefault();

        startX = parseInt(e.offsetX) //+ parseInt(e.offsetX);
        startY = parseInt(e.offsetY) //+ parseInt(e.offsetY);
        isDown=true;
        console.log(e);
      }

      function mouseMove(e) {

        e.preventDefault();

        if(!isDown) {
          return
        }

        let mouseX = parseInt(e.offsetX) ;
        let mouseY = parseInt(e.offsetY) ;


        // width and height of the box to be drawn based on 
        // starting and this current
        let width = mouseX - startX;
        let height = mouseY - startY;
        

        // clear rect that is on the cvans now
        rectCtx.clearRect(0,0, rectCanvas.width, rectCanvas.height);
        console.log("here")
        rectCtx.strokeRect(startX, startY, width, height);

        

      }
    </script>
  






  </body>


  

</html>

